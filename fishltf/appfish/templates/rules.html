{% extends "base.html" %}
{% load static %}
{% load custom_filters %}

{% block link %}
<link rel="stylesheet" href="{% static 'css/rules.css' %}"> <!-- Подключаем profile.css -->

<!--<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>  -->
<!--<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>  -->
<script src="{% static 'js/MathJax/es5/tex-mml-chtml.js' %}"></script>

{% endblock %}






{% block content %}

<div class="container">
<div class="rules-container">
    <h1>Правила соревнований по рыбалке</h1>
  
    <section>
      <h2>1. Регистрация улова</h2>
      <p>
        Чтобы ваш улов был учтен в статистике, необходимо через кнопку «Создать пост» в боте отправить информацию о пойманном трофее. После этого администрация проверит данные, и информация о каждой пойманной рыбе будет внесена в базу. Баллы начисляются с учетом вида рыбы и её размера.
      </p>
      <p><strong>Пример начисления баллов для отдельных видов рыб:</strong></p>
      <ul>
        <li><strong>Карась серебряный</strong> — –3 балла</li>
        <li><strong>Карась золотой</strong> — 4 балла</li>
        <li><strong>Щука</strong> — 5 баллов</li>
      </ul>
    </section>
  
    <section>
      <h2>2. Расчет базовых баллов по улову</h2>
      <p>
        Базовые баллы за улов рассчитываются суммированием индивидуальных вкладов каждой рыбы. Для каждой рыбы определяется базовая функция начисления баллов, зависящая от вида и размера.
      </p>
      <p>Обозначения:</p>
      <ul>
        <li>\(N\) — общее количество рыб в улове</li>
        <li>\(f_i\) — вид \(i\)-й рыбы</li>
        <li>\(s_i\) — размер (или вес) \(i\)-й рыбы</li>
        <li>\(P(f_i)\) — функция, начисляющая базовые баллы за вид рыбы</li>
        <li>\(K(s_i)\) — коэффициент, зависящий от размера рыбы</li>
      </ul>
      <p>
        Тогда суммарные баллы по улову рассчитываются по формуле:
      </p>
      <p class="formula">
        \(\displaystyle \text{Базовые баллы} = \sum_{i=1}^{N} P(f_i) \cdot K(s_i)\)
      </p>
    </section>
  
    <section>
      <h2>3. Функция \(K(w)\) для расчёта коэффициента по размеру рыбы</h2>
      <p>
        Коэффициент \(K(w)\) определяется в зависимости от категории рыбы. Пусть \(w\) — вес рыбы, а пороговые значения для разных категорий задаются следующим образом:
      </p>
      <ul>
        <li>\(t_{\text{bait}}\) — порог для категории «baitfish»</li>
        <li>\(t_{\text{small}}\) — порог для категории «small»</li>
        <li>\(t_{\text{medium}}\) — порог для категории «medium»</li>
        <li>\(t_{\text{big}}\) — порог для категории «big»</li>
        <li>\(t_{\text{trophy}}\) — порог для категории «trophy»</li>
      </ul>
      <p>
        Функция \(K(w)\) записывается так:
      </p>
      <pre>
  K(w)=
    { 0.1 + (w/t<sub>bait</sub>)·(1.0 - 0.2),           если рыба относится к «baitfish»;
      1.0 + (w/t<sub>small</sub>)·(2.0 - 1.0),          если рыба относится к «small»;
      2.0 + ((w - t<sub>small</sub>)/(t<sub>medium</sub> - t<sub>small</sub>))·(4.0 - 2.0),   если рыба относится к «medium»;
      3.0 + ((w - t<sub>medium</sub>)/(t<sub>big</sub> - t<sub>medium</sub>))·(7.0 - 4.0),     если рыба относится к «big»;
      5.0 + ((w - t<sub>big</sub>)/(t<sub>trophy</sub> - t<sub>big</sub>))·(12.0 - 7.0),      если рыба относится к «trophy»;
      12.0 + ((w - t<sub>trophy</sub>)/t<sub>trophy</sub>),  если рыба относится к «record».
    }
      </pre>
      <p>
        <strong>Пояснения:</strong>
      </p>
      <ul>
        <li><em>Baitfish:</em> Начальное значение 0.1, затем прибавляется доля веса, нормированная на порог для baitfish, умноженная на \(0.8\) (разница \(1.0 - 0.2\)).</li>
        <li><em>Small:</em> Начальное значение — 1.0, далее прибавляется доля веса, нормированная на порог для small, умноженная на \(1.0\) (разница \(2.0 - 1.0\)).</li>
        <li><em>Medium:</em> Начинается с 2.0, затем добавляется доля превышения над порогом small, нормированная на разницу \(t_{\text{medium}} - t_{\text{small}}\) и умноженная на \(2.0\) (разница \(4.0 - 2.0\)).</li>
        <li><em>Big:</em> Начальное значение 3.0, плюс доля веса, превышающая порог medium, умноженная на \(3.0\) (разница \(7.0 - 4.0\)) и нормированная на разницу \(t_{\text{big}} - t_{\text{medium}}\).</li>
        <li><em>Trophy:</em> Начинается с 5.0, затем прибавляется нормированное превышение над порогом big, умноженное на \(5.0\) (разница \(12.0 - 7.0\)).</li>
        <li><em>Record:</em> Начинается с 12.0, далее добавляется превышение над порогом trophy, нормированное на сам порог trophy.</li>
      </ul>
    </section>
  
    <section>
      <h2>4. Сезонный рейтинг</h2>
      <p>
        Сезонный рейтинг учитывает как базовые баллы за улов, так и дополнительные бонусы и штрафы.
      </p>
      <p>Обозначения:</p>
      <ul>
        <li>\(T_{\text{season}}\) — множество рыб, попавших в топ-5 по трофеям в текущем сезоне</li>
        <li>\(W_{\text{season}}\) — множество рыб, входящих в топ-5 по весу</li>
        <li>\(Q_{\text{season}}\) — множество видов рыб, входящих в топ-5 по количеству</li>
        <li>\(P_{\text{point}}(f)\) — функция, начисляющая дополнительные баллы за трофей</li>
        <li>\(r(p)\) — функция обратного ранжирования, где:
          <br>
          \(\displaystyle r(p) = 6 - p\) (для \(p = 1, 2, 3, 4, 5\); то есть за 1-е место коэффициент равен 5, а за 5-е — 1)
        </li>
        <li>\(N_{\text{fish}}\) — общее количество рыб в сезоне</li>
        <li>\(N_{\text{sessions}}\) — количество рыбалок (сеансов)</li>
        <li>\(W(s)\) — функция, отражающая среднюю размерность улова (для расчёта штрафного коэффициента)</li>
      </ul>
      <p>
        Формула сезонного рейтинга:
      </p>
      <div class="formula">
        $$ 
        \text{Баллы за сезон} = ( \sum \left( P(f) \cdot K(s) \right) + 
        \sum \left( BG_{\text{top5\_season}} \left( P(f) \cdot \frac{1}{\text{place}} \right) \right) + 
       
        $$
        $$
        \sum \left( W_{\text{top5\_season}} \cdot \frac{10}{\text{place}} \right) + 
       
        \sum \left( Q_{\text{top5\_season}} \cdot \frac{10}{\text{place}} \right) )   - 
        \frac{N_{\text{рыб}}}{N_{\text{рыбалок}}} \cdot W_{\text{размер}}
        $$
    </div>
    
    
      <p>
        Победителем сезона становится участник, который на 31 декабря в 23:59 имеет наибольшее количество баллов. Сезон длится с 1 января по 31 декабря, а сезонный рейтинг определяет лучшего рыболова текущего сезона.
      </p>
    </section>
  
    <section>
      <h2>5. Общий рейтинг</h2>
      <p>
        Общий рейтинг учитывает достижения участника за все проведённые сезоны и рассчитывается по формуле:
      </p>
      <p class="formula">
        \(\displaystyle R_{\text{total}} = F_{\text{prev}} + \sum_{i \in T_{\text{all}}} \Big( P_{\text{point}}(f_i) \cdot r(p_i) \Big) + \sum_{j \in Q_{\text{all}}} \Big( 10 \cdot r(p_j) \Big) + \sum_{k \in W_{\text{all}}} \Big( 10 \cdot r(p_k) \Big) + \frac{N_{\text{fish}}}{N_{\text{sessions}}}\)
      </p>
      <ul>
        <li>\(F_{\text{prev}}\) — баллы, начисленные за места в предыдущих сезонах</li>
        <li>\(T_{\text{all}}\), \(W_{\text{all}}\), \(Q_{\text{all}}\) — множества рыб, попадающих в топ-5 по трофеям, весу и количеству соответственно, за весь период соревнований</li>
      </ul>
    </section>
  
    <section>
      <h2>Заключение</h2>
      <p>
        Эта система начисления баллов разработана для объективной оценки улова каждого участника. Она учитывает базовые показатели улова, дополнительные бонусы за попадание в топ-5 (по трофеям, весу и количеству) и применяет штрафной коэффициент, зависящий от соотношения количества рыб к числу рыбалок и средней размерности улова. Такая система позволяет определить лучших рыболовов как в рамках отдельного сезона, так и по итогам всех проведённых соревнований.
      </p>
    </section>
  </div>
</div>






{%endblock%}




<h4>Баллы за сезон=((P(fish) * K(size_fish)) + sum(BG(top5_season"P(point fish)*revert(place)"))+ Вес(top5_season "10 * revert(palce)") + Количество(top5_season "10 * revert(palce)")) - ((кол-во рыбыл / кол-во рыб)* W(размерность рыбы))
    Рейтинг общий рыбака = func(вычисляет место в прошлых сезон и начилсяет Рейтинг) + sum(BG(top5_all_time"P(point fish)*revert(place)") + Количество(top5_all_time "10 * revert(palce)")) +  Вес(top5_season "10 * revert(palce)") + (кол-во рыб / кол-во рыбал)
    
    
    </h4>
